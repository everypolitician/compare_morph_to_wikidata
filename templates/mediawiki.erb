== SPARQL query ==

{{sparql
|query=<%= sparql_query.gsub('|', '{{!}}') %>
}}

== External source ==

<%= csv_url %>

== Stats ==

* Items only found in SPARQL (<code>---</code> in the first column): <%= diff_rows.count(&:removal?) %>
* Items only found in CSV (<code>+++</code> in the first column): <%= diff_rows.count(&:addition?) %>
* Items that differ between sources (&rarr; in the first column): <%= diff_rows.count(&:modification?) %>
* Total Wikidata items returned by SPARQL query: <%= wikidata_records.size %>
* Total Rows in CSV: <%= external_csv.size %>

== Comparison ==

<% if section.params[:header_template] %>
{{<%= section.params[:header_template] %>}}
<% else %>
{|class="wikitable"
<% headers.each do |header| -%>
| <%= header %>
<% end -%>
|-
<% end -%>
<%= diff_rows.map(&:wikitext).join("\n") %>
<% if section.params[:footer_template] %>
{{<%= section.params[:footer_template] %>}}
<% else %>
|}
<% end %>
